(function(e){e.fn.__bind__=e.fn.bind;e.fn.__unbind__=e.fn.unbind;e.fn.__find__=e.fn.find;var d={version:"0.7.9",override:/keypress|keydown|keyup/g,triggersMap:{},specialKeys:{27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",
191:"/"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},newTrigger:function(b,c,d){var a={};a[b]={};a[b][c]={cb:d,disableInInput:!1};return a}};d.specialKeys=e.extend(d.specialKeys,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/"});e.fn.find=function(b){this.query=b;return e.fn.__find__.apply(this,arguments)};e.fn.unbind=function(b,
c,j){e.isFunction(c)&&(j=c,c=null);if(c&&"string"===typeof c)for(var a=(this.prevObject&&this.prevObject.query||this[0].id&&this[0].id||this[0]).toString(),f=b.split(" "),g=0;g<f.length;g++)delete d.triggersMap[a][f[g]][c];return this.__unbind__(b,j)};e.fn.bind=function(b,c,j){var a=b.match(d.override);if(e.isFunction(c)||!a||null==c)return this.__bind__.apply(this,arguments);var f=null,g=e.trim(b.replace(d.override,""));g&&(f=this.__bind__(g,c,j));"string"===typeof c&&(c={combi:c});if(c.combi)for(g=
0;g<a.length;g++){var f=a[g],h=c.combi.toLowerCase(),l=d.newTrigger(f,h,j),i=(this.prevObject&&this.prevObject.query||this[0].id&&this[0].id||this[0]).toString();l[f][h].disableInInput=c.disableInInput;d.triggersMap[i]?d.triggersMap[i][f]||(d.triggersMap[i][f]=l[f]):d.triggersMap[i]=l;var m=d.triggersMap[i][f][h];m?m.constructor!==Array?d.triggersMap[i][f][h]=[m]:d.triggersMap[i][f][h][m.length]=l[f][h]:d.triggersMap[i][f][h]=[l[f][h]];this.each(function(){var a=e(this);a.attr("hkId")&&a.attr("hkId")!==
i&&(i=a.attr("hkId")+";"+i);a.attr("hkId",i)});f=this.__bind__(a.join(" "),c,d.handler)}return f};d.findElement=function(b){if(!e(b).attr("hkId")&&(e.browser.opera||e.browser.safari))for(;!e(b).attr("hkId")&&b.parentNode;)b=b.parentNode;return b};d.handler=function(b){var c=d.findElement(b.currentTarget),c=e(c),j=c.attr("hkId");if(j){for(var j=j.split(";"),a=b.which,f=b.type,g=d.specialKeys[a],h=!g&&String.fromCharCode(a).toLowerCase(),l=b.shiftKey,i=b.ctrlKey,m=b.altKey||b.originalEvent.altKey,k=
null,a=0;a<j.length;a++)if(d.triggersMap[j[a]][f]){k=d.triggersMap[j[a]][f];break}if(k&&(!l&&!i&&!m?g=k[g]||h&&k[h]:(a="",m&&(a+="alt+"),i&&(a+="ctrl+"),l&&(a+="shift+"),(g=k[a+g])||h&&(g=k[a+h]||k[a+d.shiftNums[h]]||"shift+"===a&&k[d.shiftNums[h]])),g)){h=!1;for(a=0;a<g.length;a++){if(g[a].disableInInput&&(k=e(b.target),c.is("input")||c.is("textarea")||c.is("select")||k.is("input")||k.is("textarea")||k.is("select")))return!0;h=h||g[a].cb.apply(this,[b])}return h}}};window.hotkeys=d;return e})(jQuery);
